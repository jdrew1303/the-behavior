<polymer-element name="the-behavior" attributes="type direction distance action accept arguments debug">
  <script src="../browser/the-behavior.js"></script>
  <script>
    var behavior = require('the-behavior');

    Polymer('the-behavior', {
      network: null,
      created: function () {
        this.container = this.parentElement.impl;
        var debug = [];
        if (this.debug) {
          debug = this.debug.split(' ');
        }
        behavior.runGraph(behavior.prepareGraph(this), function (network) {
          if (debug.length) {
            network.on('data', function (data) {
              var matches = false;
              if (data.subgraph) {
                return;
              }
              debug.forEach(function (debuggable) {
                if (data.id.indexOf(debuggable) !== -1) {
                  matches = true;
                }
              });
              if (!matches) {
                return;
              }

              console.log(data.id);
            });
            /*
            network.on('disconnect', function (data) {
              if (data.subgraph) {
                return;
              }
              console.log('DISC', data.id);
            });
            */
          }
        });
      }
    });
  </script>
</polymer-element>
